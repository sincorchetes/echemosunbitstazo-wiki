

<!DOCTYPE html>
<html class="writer-html5" lang="es" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Gestión de usuari@s y grupos &mdash; documentación de Echemos un bitstazo ~ Wiki - </title>
  

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/translations.js"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Índice" href="../../../genindex.html" />
    <link rel="search" title="Búsqueda" href="../../../search.html" />
    <link rel="next" title="Gestores de paquetes" href="../pkgmnt/pkgmnt.html" />
    <link rel="prev" title="Linux" href="../linux.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html" class="icon icon-home"> Echemos un bitstazo ~ Wiki
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Buscar documentos" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Administración de sistemas</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../sysadmin.html">Administración de sistemas</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../linux.html">Linux</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">Gestión de usuari&#64;s y grupos</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#algunos-conceptos">Algunos conceptos</a></li>
<li class="toctree-l4"><a class="reference internal" href="#usuari-s">Usuari&#64;s</a></li>
<li class="toctree-l4"><a class="reference internal" href="#grupos">Grupos</a></li>
<li class="toctree-l4"><a class="reference internal" href="#permisos">Permisos</a></li>
<li class="toctree-l4"><a class="reference internal" href="#permisos-especiales">Permisos especiales</a></li>
<li class="toctree-l4"><a class="reference internal" href="#referencias">Referencias</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../pkgmnt/pkgmnt.html">Gestores de paquetes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../fedora/guides/fedora.html">Fedora</a></li>
<li class="toctree-l3"><a class="reference internal" href="../centos/guides/centos.html">CentOS</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../scripting/bash/bash.html">Bash</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../services/services.html">Servicios</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../automation/ansible/ansible.html">Ansible</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../storage/storage.html">Almacenamiento</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../gui/desktop.html">Entorno gráfico</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../containers/containers.html">Contenedores</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Automatización</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../automation/ansible/ansible.html">Ansible</a></li>
</ul>
<p class="caption"><span class="caption-text">Redes informáticas</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../network/network.html">Redes informáticas</a></li>
</ul>
<p class="caption"><span class="caption-text">Desarrollo</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../devel/python/python.html">Python</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Echemos un bitstazo ~ Wiki</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../../sysadmin.html">Administración de sistemas</a> &raquo;</li>
        
          <li><a href="../linux.html">Linux</a> &raquo;</li>
        
      <li>Gestión de usuari&#64;s y grupos</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../../_sources/sysadmin/linux/acl/acl.rst.txt" rel="nofollow"> Ver código fuente de la página</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="gestion-de-usuari-s-y-grupos">
<h1>Gestión de usuari&#64;s y grupos<a class="headerlink" href="#gestion-de-usuari-s-y-grupos" title="Enlazar permanentemente con este título">¶</a></h1>
<div class="section" id="algunos-conceptos">
<h2>Algunos conceptos<a class="headerlink" href="#algunos-conceptos" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Linux al igual que otro sistema operativo basado en UNIX, por herencia obtiene uno de los hitos que marcó un antes y después en la era de los sistemas, y es el término <strong>multiusuario</strong>. Esto quiere decir que nos permite tener diferentes cuentas de distintos usuari&#64;s iniciadas en el sistema corriendo <strong>n</strong> procesos a la vez pertenecientes a cada usuario. Anteriormente, si querías hacer uso del sistema y otra persona quería utilizarlo, no podías ya que tod&#64;s disponían de una sola sesión de usuario, sin embargo con los avances que hicieron en el pasado, sacaron adelante esta magnífica característica, la del <strong>multiusuario</strong>.</p>
</div>
<div class="section" id="usuari-s">
<h2>Usuari&#64;s<a class="headerlink" href="#usuari-s" title="Enlazar permanentemente con este título">¶</a></h2>
<p>L&#64;s usuari&#64;s son personas que tienen un determinado nivel de acceso tanto a la empresa dónde resida el equipo al que pueden acceder y operar, como en su equipo personal. A nivel lógico, esto se conoce como cuentas de usuari&#64;, las cuáles contienen como mínimo un nombre para la cuenta siendo este el nombre de usuari&#64; y una contraseña. No obstante, l&#64;s desarrolladores de sistemas operativos o de cualquier otro tipo de software intentan simplificar el tratamiento de las cuentas de usuarios mediante un ID numérico, ya que se consume menos recursos buscando números que letras.</p>
<p>En Linux, esos ID asignados a los usuarios se les denominan UID <em>User Identifier</em> o identificador de usuario. Según la distribución, el primer usuario o la primera usuaria del sistema, este establece un UID de 1000, y comienza a sumarse +1 a los posteriores UID creados. También, se añade un grupo nuevo al sistema con el mismo nombre de la cuenta del usuario o de la usuaria y se establece como un grupo primario con el mismo ID.</p>
<div class="section" id="como-crear-un-a-usuari">
<h3>¿Cómo crear un(a) usuari&#64;?<a class="headerlink" href="#como-crear-un-a-usuari" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Como norma general y es altamente recomendado hacer uso de los comandos <code class="code docutils literal notranslate"><span class="pre">useradd(8)</span></code> o <code class="code docutils literal notranslate"><span class="pre">adduser(8)</span></code> podríamos crear un(a) usuari&#64; a mano, haciendo los siguientes pasos y como usuario root o haciendo uso de <code class="code docutils literal notranslate"><span class="pre">sudo(1)</span></code>:</p>
<ol class="arabic simple">
<li><dl class="simple">
<dt>Averiguamos cual es el último UID/GID antes de crear nuestr&#64; usuari&#64;</dt><dd><ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">grep</span> <span class="pre">100*</span> <span class="pre">/etc/group</span></code></p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">grep</span> <span class="pre">100*</span> <span class="pre">/etc/passwd</span></code></p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Modificar la entrada del fichero <code class="code docutils literal notranslate"><span class="pre">/etc/passwd</span></code> <strong>haciendo uso de :code:`vipw(8)`</strong> añadiendo la información mínima para tener un(a) usuari&#64;, vamos ha hacerlo con «pepito»:</dt><dd><ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">pepito:x:1004:1004::/home/pepito:/bin/bash</span></code></p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Creamos un grupo para nuestro usuario <cite>/etc/group</cite></dt><dd><ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">pepito:x:1004:</span></code></p></li>
</ul>
</dd>
</dl>
</li>
<li><p>Creamos una entrada en <code class="code docutils literal notranslate"><span class="pre">/etc/shadow</span></code> mediante haciendo uso de <code class="code docutils literal notranslate"><span class="pre">vipw</span> <span class="pre">-s</span></code>:</p></li>
</ol>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Para saber que algoritmo cifrado utilizar, podemos comprobarlo en el fichero <code class="code docutils literal notranslate"><span class="pre">/etc/login.defs</span></code>, en la variable <code class="code docutils literal notranslate"><span class="pre">ENCRYPT_METHOD</span></code> lo que pasa que utiliza el sistema un salto o varios (lo desconocemos) para generar la contraseña a parte de la codificiación. Para visualizar el prefijo que necesitamos se puede consultar en:
* <code class="code docutils literal notranslate"><span class="pre">man</span> <span class="pre">3</span> <span class="pre">crypt</span></code>
* <code class="code docutils literal notranslate"><span class="pre">$1$</span></code>: MD5
* <code class="code docutils literal notranslate"><span class="pre">$2a$</span></code>: Blowfish
* <code class="code docutils literal notranslate"><span class="pre">$5$</span></code>: SHA-256
* <code class="code docutils literal notranslate"><span class="pre">$6$</span></code>: SHA-512</p>
</div>
<p>Sin embargo, es <strong>altamente recomendable</strong> generar una contraseña nueva haciendo uso del comando <code class="code docutils literal notranslate"><span class="pre">passwd(1)</span></code>, ya que esta genera la contraseña con el salto correcto, el algoritmo correcto y se genera automáticamente la entrada en <code class="code docutils literal notranslate"><span class="pre">/etc/shadow</span></code>: <cite>passwd pepito</cite></p>
<ol class="arabic simple" start="5">
<li><p>Creamos el directorio: <code class="code docutils literal notranslate"><span class="pre">/home/nombre_usuari&#64;</span></code></p></li>
<li><p>Creamos el archivo: <code class="code docutils literal notranslate"><span class="pre">/var/spool/mail/nombre_usuari&#64;</span></code></p></li>
<li><p>Copiamos los archivos <code class="code docutils literal notranslate"><span class="pre">/etc/skel/*</span></code> en <code class="code docutils literal notranslate"><span class="pre">/home/nombre_usuari&#64;</span></code></p></li>
<li><p>Fijamos los permisos correspondientes <a class="reference external" href="mailto:usuari&#37;&#52;&#48;/grupo">usuari<span>&#64;</span>/grupo</a> al directorio <code class="code docutils literal notranslate"><span class="pre">/home/nombre_usuari&#64;</span></code> <code class="code docutils literal notranslate"><span class="pre">nombre_usuari&#64;:grupo_usuari&#64;</span></code> + <code class="code docutils literal notranslate"><span class="pre">chmod</span> <span class="pre">700</span></code></p></li>
<li><p>Declaramos los permisos <code class="code docutils literal notranslate"><span class="pre">chmod</span> <span class="pre">660</span> <span class="pre">/var/spool/mail/nombre_usuari&#64;</span></code></p></li>
</ol>
<p>Y listo, tendremos a nuestr&#64; usuari&#64; cread&#64;. No obstante, este proceso, además de ser tedioso, complejo y propenso a errores, es preferible hacer uso de unos comandos que nos facilitan crearlo.</p>
</div>
<div class="section" id="comando-useradd">
<h3>Comando useradd<a class="headerlink" href="#comando-useradd" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Con este comando generamos un(a) usuari&#64; en ¡menos que canta un gallo! Todo lo que tenemos que hacer es:
.. code-block:: bash</p>
<blockquote>
<div><p>sudo useradd pepito -m
sudo passwd pepito</p>
</div></blockquote>
<p>Y ya directamente tenemos usuari&#64; con su directorio <code class="code docutils literal notranslate"><span class="pre">/home</span></code> y <code class="code docutils literal notranslate"><span class="pre">/var/spool/mail</span></code> por defecto con sus correspondientes permisos, con la entrada correctamente creada en el fichero <code class="code docutils literal notranslate"><span class="pre">/etc/passwd</span></code>, <code class="code docutils literal notranslate"><span class="pre">/etc/shadow</span></code> y <code class="code docutils literal notranslate"><span class="pre">/etc/group</span></code> listo para identificarse.</p>
<p>¿Fácil verdad? También hay que tener en cuenta, que la configuración por defecto del comando <code class="code docutils literal notranslate"><span class="pre">useradd(8)</span></code> que se encuentra en <code class="code docutils literal notranslate"><span class="pre">/etc/default/useradd</span></code>, ya que puede haber otras distribuciones que tengan otros parámetros, o directamente, no contenga ningún fichero y hay que especificarlo de forma manual tal que así:
.. code-block:: bash</p>
<blockquote>
<div><p>sudo useradd pepito -m -k /etc/skel -U
sudo passwd pepito</p>
</div></blockquote>
<ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">-m</span></code>: Genera un directorio en <code class="code docutils literal notranslate"><span class="pre">/home</span></code> con el nombre de pepito</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">-k</span> <span class="pre">/etc/skel</span></code>: Copia los archivos básicos para que funcione plenamente <code class="code docutils literal notranslate"><span class="pre">bash(1)</span></code></p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">-U</span></code>: Crea un grupo con el mismo nombre que el usuario</p></li>
</ul>
</div>
<div class="section" id="comando-adduser">
<h3>Comando adduser<a class="headerlink" href="#comando-adduser" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Si no tenemos suficiente con el anterior, podemos hacer uso de <code class="code docutils literal notranslate"><span class="pre">adduser(8)</span></code>. Es un comando parecido al anterior, no hay mucha diferencia de usabilidad al menos en Linux. En FreeBSD, este comando tiene por defecto un asistente interactivo que nos va preguntando paso por paso cómo crearlo facilitándonos un poco la tarea. Este comando toma los valores para crear el usuario del fichero <code class="code docutils literal notranslate"><span class="pre">/etc/default/useradd</span></code> como el comando anterior.</p>
</div>
<div class="section" id="ficheros-implicados-en-el-uso-de-ambos-comandos">
<h3>Ficheros implicados en el uso de ambos comandos<a class="headerlink" href="#ficheros-implicados-en-el-uso-de-ambos-comandos" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Según el <code class="code docutils literal notranslate"><span class="pre">man</span></code> de ambos comandos, tenemos una serie de ficheros implicados cuando ejecutamos uno de los dos comandos para crear el o la usuari&#64;.</p>
<ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">/etc/passwd</span></code>: Archivo clave con la información de la cuenta de usuari&#64;</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">/etc/shadow</span></code>: Información sobre la seguridad de la cuenta de usuari&#64;</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">/etc/group</span></code>: Grupos con sus correspondienes GID, usuari&#64;s unid&#64;s…</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">/etc/gshadow</span></code>: Información relevante sobre la seguridad de los grupos</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">/etc/default/useradd</span></code>: Esquema por defecto sobre cómo crear la cuenta de usuari&#64;</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">/etc/skel/</span></code>: Directorio que contiene ficheros por defecto para el/la usuari&#64;</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">/etc/login.defs</span></code>: Configuración del cifrado de las contraseñas, permisos…etc</p></li>
</ul>
</div>
<div class="section" id="como-autenticarse-con-un-a-usuari-en-nuestra-sesion">
<h3>¿Cómo autenticarse con un(a) usuari&#64; en nuestra sesión?<a class="headerlink" href="#como-autenticarse-con-un-a-usuari-en-nuestra-sesion" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Si nos encontramos logeados mediante nuestr&#64; usuari&#64; rutinario, pero queremos acceder a otras cuentas del sistema, podemos hacerlo haciendo uso del comando <code class="code docutils literal notranslate"><span class="pre">su(1)</span></code>.</p>
<p>Estamos en la cuenta de pepito, y queremos pasar a la de susana.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>su - susana
</pre></div>
</div>
</div>
<div class="section" id="como-modificar-la-informacion-de-un-a-usuari">
<h3>¿Cómo modificar la información de un(a) usuari&#64;?<a class="headerlink" href="#como-modificar-la-informacion-de-un-a-usuari" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Tenemos un comando (<em>¿Cómo no?</em>), para modificar y actualizar la información de nuestr&#64; usuari&#64;. Este comando se llama <code class="code docutils literal notranslate"><span class="pre">usermod(8)</span></code>. Entre otras cosas, nos permite bloquear una cuenta, actualizar y gestionar lá fecha de demora y fecha límite para cambiar la contraseña, añadir un usuario a grupos secundarios…</p>
<div class="section" id="bloquear-una-cuenta">
<h4>Bloquear una cuenta<a class="headerlink" href="#bloquear-una-cuenta" title="Enlazar permanentemente con este título">¶</a></h4>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo usermod -L pepito
</pre></div>
</div>
<p>Si vemos el <code class="code docutils literal notranslate"><span class="pre">/etc/passwd</span></code>, habrá añadido delante de la contraseña una (!), eso quiere decir que se encuentra bloqueada la cuenta.</p>
</div>
<div class="section" id="desbloqueando-la-cuenta">
<h4>Desbloqueando la cuenta<a class="headerlink" href="#desbloqueando-la-cuenta" title="Enlazar permanentemente con este título">¶</a></h4>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo usermod -U pepito
</pre></div>
</div>
</div>
<div class="section" id="anadiendo-un-a-usuari-a-un-grupo-nuevo">
<h4>Añadiendo un(a) usuari&#64; a un grupo nuevo<a class="headerlink" href="#anadiendo-un-a-usuari-a-un-grupo-nuevo" title="Enlazar permanentemente con este título">¶</a></h4>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo usermod -a -G pepito video
</pre></div>
</div>
</div>
<div class="section" id="cambiando-el-grupo-principal">
<h4>Cambiando el grupo principal<a class="headerlink" href="#cambiando-el-grupo-principal" title="Enlazar permanentemente con este título">¶</a></h4>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo usermod -g users pepito
</pre></div>
</div>
</div>
<div class="section" id="modificando-el-shell-del-la-usuari">
<h4>Modificando el shell del/la usuari&#64;<a class="headerlink" href="#modificando-el-shell-del-la-usuari" title="Enlazar permanentemente con este título">¶</a></h4>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo usermod -s /bin/bash pepito
</pre></div>
</div>
</div>
<div class="section" id="cambiando-el-directorio-de-trabajo">
<h4>Cambiando el directorio de trabajo<a class="headerlink" href="#cambiando-el-directorio-de-trabajo" title="Enlazar permanentemente con este título">¶</a></h4>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo usermod -d /srv pepito
</pre></div>
</div>
</div>
<div class="section" id="insertando-un-comentario">
<h4>Insertando un comentario<a class="headerlink" href="#insertando-un-comentario" title="Enlazar permanentemente con este título">¶</a></h4>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo usermod -c <span class="s2">&quot;Comentario&quot;</span> pepito
</pre></div>
</div>
<p>Podemos obtener más información accediendo al <code class="code docutils literal notranslate"><span class="pre">man(1)</span></code> de <code class="code docutils literal notranslate"><span class="pre">usermod(8)</span></code></p>
</div>
</div>
<div class="section" id="como-eliminar-un-a-usuari">
<h3>¿Cómo eliminar un(a) usuari&#64;?<a class="headerlink" href="#como-eliminar-un-a-usuari" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Como la mayor parte de las cosas en Linux o sistemas UNIX-like, se puede hacer prácticamente todo a mano, esto se puede hacer al sentido inverso cuando creamos el/la usuari&#64; en el sistema.</p>
<ol class="arabic simple">
<li><p>Eliminar la entrada del usuario pepito de <code class="code docutils literal notranslate"><span class="pre">/etc/passwd</span></code> haciendo uso de <code class="code docutils literal notranslate"><span class="pre">vipw(8)</span></code></p></li>
<li><p>Destruir el directorio <code class="code docutils literal notranslate"><span class="pre">/home/pepito</span></code> o el asignado, en caso de haber escogido otro directorio</p></li>
<li><p>Eliminar el fichero del directorio <code class="code docutils literal notranslate"><span class="pre">/var/spool/mail/pepito</span></code></p></li>
<li><p>Quitar el grupo que se creó junto con el/la usuari&#64; por defecto del fichero <code class="code docutils literal notranslate"><span class="pre">/etc/groups</span></code> pero haciendo uso de <code class="code docutils literal notranslate"><span class="pre">vigr(8)</span></code></p></li>
</ol>
<p>Y si queremos evitarnos tanta historia, bastará con hacer uso del comando <code class="code docutils literal notranslate"><span class="pre">userdel(8)</span></code></p>
<p>Tan solo con ejecutar:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo userdel -r pepito
</pre></div>
</div>
<p>Habremos hecho todos los pasos anteriores con un sencillo comando.</p>
</div>
<div class="section" id="directorio-de-trabajo">
<h3>¿Directorio de trabajo?<a class="headerlink" href="#directorio-de-trabajo" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Tod&#64;s l&#64;s usuari&#64;s poseen un entorno de trabajo por defecto que se encuentra en el directorio <code class="code docutils literal notranslate"><span class="pre">/home</span></code>. Este entorno de trabajo contiene el nombre de la cuenta del/la usuari&#64; y le permite trabajar en él y que, por defecto, se van almacenando archivos de configuración de programas entre un largo etcétera.</p>
</div>
<div class="section" id="super-usuario">
<h3>¿Super usuario?<a class="headerlink" href="#super-usuario" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Existe un usuario por defecto creado en el sistema llamado <code class="code docutils literal notranslate"><span class="pre">root</span></code>. Este usuario por defecto en todos los sistemas UNIX, UNIX-like como Liux, FreeBSD, Minix…etc tiene acceso a tod&#64;s los archivos, carpetas, operaciones con dispositivos, procesos… del sistema. Es muy importante utilizarlo lo menos posible y <strong>nunca</strong> revelar su contraseña, o ejecutar aplicaciones sobre todo gráficas con este usuario.</p>
</div>
</div>
<div class="section" id="grupos">
<h2>Grupos<a class="headerlink" href="#grupos" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Por lo general, los grupos son agrupaciones de personas que tienen un objetivo en común, si bien pueden ser personas que tienen el mismo gusto por ver a su cantante favorito como obtener los mejores diseños de sus productos para una empresa. En nuestro caso, los grupos permiten formar un conjunto de usuari&#64;s que desempeñen un rol determinado dentro del sistema. Creando, modificando documentos que ell&#64;s hayan generado pero que otr&#64;s que no pertenezca a dicho grupo no tengan permisos para hacerlo. Un usuario, o una usuaria puede formar parte de más de un grupo a la vez, pero por defecto, tienen un grupo primario al que pertenecen.</p>
<p>Los grupos como l&#64;s usuari&#64;s, contienen un ID que faciliten su recuperación dentro del sistema, en este caso se llama GID de <code class="code docutils literal notranslate"><span class="pre">Group</span> <span class="pre">Identifier</span></code> o Identificador de grupo. El sistema por defecto tiene unos grupos ya asignados para determinadas actividades del mismo para diferentes tareas como el acceso a los dispositivos de audio y video entre otras cosas.</p>
<div class="section" id="grupos-primarios">
<h3>¿Grupos primarios?<a class="headerlink" href="#grupos-primarios" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Los grupos primarios son algo así como el grupo principal al que pertenece un/una usuari&#64;. Cada archivo que cree o modifique deberá contener el mismo grupo o si no, no podrá hacerlo a menos que se encuentre añadido a un grupo secundario. Un grupo primario como su nombre indica, es el primer grupo al que pertenece y por ende solo podrá tener un GID asociado a la cuenta. Sin embargo, una cuenta de usuari&#64; puede pertenecer a muchos grupos secundarios.</p>
</div>
<div class="section" id="como-linux-sabe-que-hace-una-cosa-y-un-grupo-otra">
<h3>¿Cómo Linux sabe qué hace una cosa y un grupo otra?<a class="headerlink" href="#como-linux-sabe-que-hace-una-cosa-y-un-grupo-otra" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Existen una serie de ficheros clave que todo administrador debe saber que existen:</p>
<ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">/etc/passwd</span></code>: Contiene los nombres de usuario, contraseñas (en antiguas versiones que no usen <code class="code docutils literal notranslate"><span class="pre">shadow(5)</span></code>, UID, GID, descripción, directorio de trabajo y el intérprete de comandos que utilice. Cuando en el campo de la contraseña se encuentra una «x» quiere decir que hace uso del archivo <code class="code docutils literal notranslate"><span class="pre">/etc/shadow</span></code></p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">/etc/shadow</span></code>: Es un fichero que contiene todas las contraseñas ya sean de grupos o de usuari&#64;s cifradas en un algoritmo determinado por el sistema, se utiliza para evitar que las contraseñas se puedan leer en <code class="code docutils literal notranslate"><span class="pre">/etc/passwd</span></code> ya que tod&#64;s l&#64;s usuari&#64;s tienen acceso lectura. Este archivo contiene:</p></li>
<li><p>Nombre de la cuenta de usuari&#64;</p></li>
<li><p>Contraseña encriptada, o bien puede incluir (!) que aparece como cuenta bloqueada en el sistema, un ejemplo de esto es cuando creamos una nueva cuenta sin haberle asignado una contraseña.</p></li>
<li><p>Fecha del último cambio de contraseña, si se encuentra vacío, es que no están habilitadas las gestiones de cuentas de l&#64;s usuari&#64;s.</p></li>
<li><p>Fecha mínima para efectuar un cambio de contraseña</p></li>
<li><p>Fecha máxima límite para modificar la contraseña</p></li>
<li><p>Periodo de aviso para cambiarla</p></li>
<li><p>Número de días con el usuario inactivo después de que haya expirado la contraseña</p></li>
<li><p>Fecha de expiración de la cuenta</p></li>
<li><p>Campo reservado</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">/etc/shadow-</span></code>: Copia de seguridad del fichero anterior</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">/etc/group</span></code>: Contiene nombre del grupo, contraseña (en caso de no usar <code class="code docutils literal notranslate"><span class="pre">shadow(5)</span></code>), GID, lista de usuarios adjuntos</p></li>
</ul>
<blockquote>
<div><p>Son los archivos principales y que tod&#64;s tenemos que tener hechos una copia de seguridad en caso de que falle el sistema o nos equivoquemos editando alguno de ellos.</p>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>A pesar de no ser altamente recomendable su edición, si queremos editar a mano los ficheros <code class="code docutils literal notranslate"><span class="pre">passwd(5)</span></code> o <code class="code docutils literal notranslate"><span class="pre">shadow(5)</span></code> tenemos que utilizar los comandos <code class="code docutils literal notranslate"><span class="pre">vigr(1)</span></code> para edición de grupos y <code class="code docutils literal notranslate"><span class="pre">vipw(1)</span></code> para edición de los ficheros tanto <code class="code docutils literal notranslate"><span class="pre">passwd(5)</span></code> como <code class="code docutils literal notranslate"><span class="pre">shadow(5)</span></code>.</p>
</div>
</div></blockquote>
</div>
<div class="section" id="como-crear-un-grupo">
<h3>¿Cómo crear un grupo?<a class="headerlink" href="#como-crear-un-grupo" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Los grupos se pueden crear manualmente al igual que l&#64;s usuari&#64;s haciendo uso del comando <code class="code docutils literal notranslate"><span class="pre">vigr(8)</span></code>. No obstante, es preferible como siempre hacer uso de los comandos que nos faciliten las cosas más que nada para evitar incorrecciones de cualquier índole.</p>
</div>
<div class="section" id="comando-groupadd">
<h3>Comando groupadd<a class="headerlink" href="#comando-groupadd" title="Enlazar permanentemente con este título">¶</a></h3>
<p><code class="code docutils literal notranslate"><span class="pre">groupadd(8)</span></code> es una bella herramienta con la que crear un grupo, edita el fichero <code class="code docutils literal notranslate"><span class="pre">/etc/group</span></code> y a su vez actualiza el <code class="code docutils literal notranslate"><span class="pre">/etc/gshadow</span></code> para añadir la contraseña asignada</p>
<div class="section" id="creando-un-grupo">
<h4>Creando un grupo<a class="headerlink" href="#creando-un-grupo" title="Enlazar permanentemente con este título">¶</a></h4>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo groupadd sysadmins
</pre></div>
</div>
</div>
<div class="section" id="creando-un-grupo-con-gid-especifico">
<h4>Creando un grupo con GID específico<a class="headerlink" href="#creando-un-grupo-con-gid-especifico" title="Enlazar permanentemente con este título">¶</a></h4>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo groupadd -g <span class="m">1200</span> sysadmins
</pre></div>
</div>
</div>
<div class="section" id="asignando-contrasena-a-un-grupo">
<h4>Asignando contraseña a un grupo<a class="headerlink" href="#asignando-contrasena-a-un-grupo" title="Enlazar permanentemente con este título">¶</a></h4>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo groupadd -p contraseña sysadmins
</pre></div>
</div>
</div>
</div>
<div class="section" id="como-modificar-un-grupo">
<h3>¿Cómo modificar un grupo?<a class="headerlink" href="#como-modificar-un-grupo" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Como podemos modificar l&#64;s usuari&#64;s, ¿Por qué no los grupos? Pues claro que sí podemos hacerlo con <code class="code docutils literal notranslate"><span class="pre">groupmod(8)</span></code>.</p>
</div>
<div class="section" id="comando-groupmod">
<h3>Comando groupmod<a class="headerlink" href="#comando-groupmod" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Este comando nos permitirá modificar cierta información de los grupos que tenemos como por ejemplo:</p>
<div class="section" id="cambiando-el-nombre-del-grupo">
<h4>Cambiando el nombre del grupo<a class="headerlink" href="#cambiando-el-nombre-del-grupo" title="Enlazar permanentemente con este título">¶</a></h4>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo groupmod -n devels sysadmins
</pre></div>
</div>
</div>
<div class="section" id="cambiando-el-gid">
<h4>Cambiando el GID<a class="headerlink" href="#cambiando-el-gid" title="Enlazar permanentemente con este título">¶</a></h4>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo groupmod -g <span class="m">1203</span> devels
</pre></div>
</div>
</div>
<div class="section" id="modificando-la-contrasena">
<h4>Modificando la contraseña<a class="headerlink" href="#modificando-la-contrasena" title="Enlazar permanentemente con este título">¶</a></h4>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo groupmod -p <span class="s2">&quot;Contraseña&quot;</span> devels
</pre></div>
</div>
</div>
</div>
<div class="section" id="como-eliminar-el-grupo">
<h3>¿Cómo eliminar el grupo?<a class="headerlink" href="#como-eliminar-el-grupo" title="Enlazar permanentemente con este título">¶</a></h3>
<p>También es otra operación que podemos hacer con <code class="code docutils literal notranslate"><span class="pre">vigr(8)</span></code>, pero es mejor utilizando este método.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo groupdel devels
</pre></div>
</div>
</div>
<div class="section" id="como-cambiar-temporalmente-nuestr-grupo-primario">
<h3>¿Cómo cambiar temporalmente nuestr&#64; grupo primario?<a class="headerlink" href="#como-cambiar-temporalmente-nuestr-grupo-primario" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Los usuarios siempre utilizamos un grupo primario que permite identificarnos con diversas partes o áreas del sistema. En caso de haber actualizado algo que requiera de una persona conectada al ordenador, se puede hacer pasar por la otra persona para saber que… Entonces existen una serie de restricciones intrínsecas como no editar un documento a la vez, si has instalado un software reciente que requiere permisos y por tanto reiniciar la sesión gráfica, se puede evitar.</p>
<p>Básicamente es gracias al comando <code class="code docutils literal notranslate"><span class="pre">newgrp(1)</span></code></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>newgrp finance
</pre></div>
</div>
<p>Y con esto, se activa nuestro grupo secundario como primario.</p>
</div>
<div class="section" id="visualizando-los-grupos-en-los-que-estoy">
<h3>Visualizando los grupos en los que estoy<a class="headerlink" href="#visualizando-los-grupos-en-los-que-estoy" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Se puede ver fácilmente haciendo uso del comando</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>groups
</pre></div>
</div>
</div>
<div class="section" id="comodin">
<h3>Comodín<a class="headerlink" href="#comodin" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Tenemos un pequeño comodín que nos permite modificar ciertas cosas de nuestr&#64; usuari&#64; o de un grupo en concreto como su contraseña. Esta herramienta se llama <code class="code docutils literal notranslate"><span class="pre">gpasswd(1)</span></code> y la tenemos instalada por defecto.</p>
<div class="section" id="anadiendo-un-a-usuari-a-un-grupo">
<h4>Añadiendo un(a) usuari&#64; a un grupo<a class="headerlink" href="#anadiendo-un-a-usuari-a-un-grupo" title="Enlazar permanentemente con este título">¶</a></h4>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo gpasswd -a pepito users
</pre></div>
</div>
</div>
<div class="section" id="eliminando-un-a-usuari-de-un-grupo">
<h4>Eliminando un(a) usuari&#64; de un grupo<a class="headerlink" href="#eliminando-un-a-usuari-de-un-grupo" title="Enlazar permanentemente con este título">¶</a></h4>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo gpasswd -d pepito users
</pre></div>
</div>
</div>
<div class="section" id="suprimir-contrasena-en-un-grupo">
<h4>Suprimir contraseña en un grupo<a class="headerlink" href="#suprimir-contrasena-en-un-grupo" title="Enlazar permanentemente con este título">¶</a></h4>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo gpasswd -r users
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="permisos">
<h2>Permisos<a class="headerlink" href="#permisos" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Poco sentido tiene diferenciar usuarios y grupos si no les atribuímos algún permiso especial que permita establecer una cierta jerarquía o distinción, ya que si no, estaríamos dejando un sistema horizontal en el que tod&#64;s l&#64;s usuari&#64;s puedan hacer lo que quieran dentro del sistema. Aquí entra en juego el factor permisos.</p>
<p>Los permisos en UNIX se rigen por una serie de campos</p>
<blockquote>
<div><ul class="simple">
<li><p>Usuario: Solo el autor puede leer, escribir, ejecutar, o una combinación de los mismos, el poder en este caso sobre el fichero solo lo tiene él o ella o el usuario <code class="code docutils literal notranslate"><span class="pre">root</span></code>.</p></li>
<li><p>Grupo: Tod&#64;s l&#64;s usuari&#64;s que formen parte del grupo, dependiendo de los permisos que tenga establecido en este apartado el fichero o directorio podrán o no leer, escribir, o ejecutar en caso de ser un fichero ejecutable.</p></li>
<li><p>Todo el mundo: El resto de usuari&#64;s del sistema que no pertenezcan ni al grupo, ni sea el autor del fichero, dependiendo de los permisos podrá o no acceder a los directorios y ficheros.</p></li>
</ul>
</div></blockquote>
<p>Imaginemos que tenemos el siguiente ejemplo:</p>
<p>Somos jefes(as) de un proyecto de desarrollo, y tenemos vari&#64;s emplead&#64;s a nuestro cargo. Nosotr&#64;s como jefe(as) del proyecto, tenemos plena acción sobre todos los ficheros (somos autores). Y, seleccionamos determinados ficheros para determinados grupos, por ejemplo, todos aquellos ficheros que tengan que ver con el departamento de comunicación que tiene múltiples usuari&#64;s, solo podrán acceder los de comunicación; el grupo de desarrolladores(as) tiene sus ficheros a cargo…etc Y cada usuari&#64; dentro de su grupo, tiene acceso pleno a los ficheros, sin embargo, las personas de otros grupos no pueden acceder a dichos archivos por las restricciones. Y luego, tenemos un apartado público, que solo podrá leer determinados archivos. ¡Voilá! hemos explicado el funcionamiento de usuarios y grupos de una forma sencilla.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>                         <span class="n">Jefes</span><span class="p">(</span><span class="k">as</span><span class="p">)</span> <span class="n">de</span> <span class="n">proyecto</span>
                                         \<span class="n">º</span><span class="o">/</span> \<span class="n">ª</span><span class="o">/</span>
                                            <span class="o">|</span>
                              <span class="o">|-------------------|</span>
                                <span class="o">|</span>     <span class="n">Contabilidad</span>        <span class="o">|</span>
                                <span class="o">|</span>     <span class="n">Directivas</span>                  <span class="o">|</span>
                                <span class="o">|</span>     <span class="n">Contratos</span>                     <span class="o">|</span>
                                <span class="o">|-------------------|</span>
                <span class="n">________________</span><span class="o">|</span><span class="n">________</span>
               <span class="o">/</span>                                                                       \
      <span class="n">Comunicación</span>                                     <span class="n">Desarrollo</span>
        \<span class="n">º</span><span class="o">/</span> \<span class="n">ª</span><span class="o">/</span>                                                  \<span class="n">º</span><span class="o">/</span> \<span class="n">ª</span><span class="o">/</span>
                 <span class="o">|</span>                                                      <span class="o">|</span>
<span class="o">|-----------------|</span>                    <span class="o">|-----------------|</span>
<span class="o">|</span>     <span class="n">Inventario</span> <span class="n">RRSS</span> <span class="o">|</span>                        <span class="o">|</span> <span class="n">Código</span> <span class="n">fuente</span>   <span class="o">|</span>
<span class="o">|</span> <span class="n">Inversores</span>            <span class="o">|</span>                      <span class="o">|</span> <span class="n">Contraseñas</span> <span class="n">OS</span>  <span class="o">|</span>
<span class="o">|</span> <span class="n">Media</span>                           <span class="o">|</span>                    <span class="o">|</span> <span class="n">Servidores</span>      <span class="o">|</span>
<span class="o">|</span> <span class="o">...</span>                               <span class="o">|</span>                  <span class="o">|</span> <span class="o">...</span>                         <span class="o">|</span>
<span class="o">|-----------------|</span>                    <span class="o">|-----------------|</span>
               <span class="o">|</span>                                                                        <span class="o">|</span>
               <span class="o">|</span>                               <span class="n">Todo</span> <span class="n">el</span> <span class="n">mundo</span>
               <span class="o">|</span>                               \<span class="n">º</span><span class="o">/</span> \<span class="n">ª</span><span class="o">/</span>\<span class="n">º</span><span class="o">/</span> \<span class="n">ª</span><span class="o">/</span>
               <span class="o">*-------------------------&gt;</span>  \<span class="n">º</span><span class="o">/</span> \<span class="n">ª</span><span class="o">/</span>\<span class="n">º</span><span class="o">/</span>
                                                                          \<span class="n">ª</span><span class="o">/</span> \<span class="n">ª</span><span class="o">/</span>
                                                                            <span class="o">|</span>
                                                                      <span class="o">|-------------|</span>
                                                                      <span class="o">|</span> <span class="n">index</span><span class="o">.</span><span class="n">html</span>  <span class="o">|</span>
                                                                      <span class="o">|</span> <span class="n">setup</span><span class="o">.</span><span class="n">sh</span>        <span class="o">|</span>
                                                                      <span class="o">|</span> <span class="n">screenshots</span> <span class="o">|</span>
                                                                      <span class="o">|</span> <span class="n">Twitter</span>     <span class="o">|</span>
                                                                      <span class="o">|</span> <span class="n">Facebook</span>    <span class="o">|</span>
                                                                      <span class="o">|</span> <span class="n">Google</span><span class="o">+</span>     <span class="o">|</span>
                                                                      <span class="o">|-------------|</span>
</pre></div>
</div>
<p>Ahora vamos a traducir las palabras en el lenguaje que lo interpreta el sistema, tenemos hasta tres formas de conceder, modificar o leer permisos:</p>
<ul class="simple">
<li><p>Formato verbal o por carácter: Se hacen uso de las letras para asignar, modificar o simplemente leer los permisos:</p></li>
</ul>
<blockquote>
<div><ul class="simple">
<li><p>r: <em>read</em> solo lectura</p></li>
<li><p>w: <em>writable</em> solo escritura (<em>debe ir acompañado de lectura para que pueda modificarse</em>)</p></li>
<li><p>x: <em>executable</em> solo ejecutable (<em>debe ir acompañado del permiso lectura para poder ejecutarse</em>)</p></li>
</ul>
</div></blockquote>
<table class="docutils align-default">
<colgroup>
<col style="width: 13%" />
<col style="width: 18%" />
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 12%" />
<col style="width: 12%" />
<col style="width: 12%" />
<col style="width: 13%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>#</p></th>
<th class="head"><p>r</p></th>
<th class="head"><p>w</p></th>
<th class="head"><p>x</p></th>
<th class="head"><p>rw</p></th>
<th class="head"><p>rx</p></th>
<th class="head"><p>wx</p></th>
<th class="head"><p>rwx</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Usuario</p></td>
<td><p><code class="code docutils literal notranslate"><span class="pre">chmod</span> <span class="pre">u+r</span> <span class="pre">f1</span></code></p></td>
<td><p><code class="code docutils literal notranslate"><span class="pre">u+w</span></code></p></td>
<td><p><code class="code docutils literal notranslate"><span class="pre">u+x</span></code></p></td>
<td><p><code class="code docutils literal notranslate"><span class="pre">u+rw</span></code></p></td>
<td><p><code class="code docutils literal notranslate"><span class="pre">u+rx</span></code></p></td>
<td><p><code class="code docutils literal notranslate"><span class="pre">u+wx</span></code></p></td>
<td><p><code class="code docutils literal notranslate"><span class="pre">u+rwx</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Grupo</p></td>
<td><p><code class="code docutils literal notranslate"><span class="pre">chmod</span> <span class="pre">g+r</span> <span class="pre">f1</span></code></p></td>
<td><p><code class="code docutils literal notranslate"><span class="pre">g+r</span></code></p></td>
<td><p><code class="code docutils literal notranslate"><span class="pre">g+x</span></code></p></td>
<td><p><code class="code docutils literal notranslate"><span class="pre">g+rw</span></code></p></td>
<td><p><code class="code docutils literal notranslate"><span class="pre">g+rx</span></code></p></td>
<td><p><code class="code docutils literal notranslate"><span class="pre">g+wx</span></code></p></td>
<td><p><code class="code docutils literal notranslate"><span class="pre">g+rwx</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Todo el mundo</p></td>
<td><p><code class="code docutils literal notranslate"><span class="pre">chmod</span> <span class="pre">o+r</span> <span class="pre">f1</span></code></p></td>
<td><p><code class="code docutils literal notranslate"><span class="pre">o+r</span></code></p></td>
<td><p><code class="code docutils literal notranslate"><span class="pre">o+x</span></code></p></td>
<td><p><code class="code docutils literal notranslate"><span class="pre">o+rw</span></code></p></td>
<td><p><code class="code docutils literal notranslate"><span class="pre">o+rx</span></code></p></td>
<td><p><code class="code docutils literal notranslate"><span class="pre">o+wx</span></code></p></td>
<td><p><code class="code docutils literal notranslate"><span class="pre">o+rwx</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Tod&#64;s</p></td>
<td><p><code class="code docutils literal notranslate"><span class="pre">chmod</span> <span class="pre">a+r</span> <span class="pre">f1</span></code></p></td>
<td><p><code class="code docutils literal notranslate"><span class="pre">a+r</span></code></p></td>
<td><p><code class="code docutils literal notranslate"><span class="pre">a+x</span></code></p></td>
<td><p><code class="code docutils literal notranslate"><span class="pre">a+rw</span></code></p></td>
<td><p><code class="code docutils literal notranslate"><span class="pre">a+rx</span></code></p></td>
<td><p><code class="code docutils literal notranslate"><span class="pre">a+wx</span></code></p></td>
<td><p><code class="code docutils literal notranslate"><span class="pre">a+rwx</span></code></p></td>
</tr>
</tbody>
</table>
<ul class="simple">
<li><p>Formato numérico basado en Octal: Se hace uso del 1 al 7 para definir los permisos</p></li>
</ul>
<table class="docutils align-default">
<colgroup>
<col style="width: 34%" />
<col style="width: 9%" />
<col style="width: 9%" />
<col style="width: 9%" />
<col style="width: 9%" />
<col style="width: 9%" />
<col style="width: 9%" />
<col style="width: 9%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>#</p></th>
<th class="head"><p>r</p></th>
<th class="head"><p>w</p></th>
<th class="head"><p>x</p></th>
<th class="head"><p>rw</p></th>
<th class="head"><p>rx</p></th>
<th class="head"><p>wx</p></th>
<th class="head"><p>rwx</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Usuario</p></td>
<td><p>400</p></td>
<td><p>200</p></td>
<td><p>100</p></td>
<td><p>600</p></td>
<td><p>500</p></td>
<td><p>300</p></td>
<td><p>700</p></td>
</tr>
<tr class="row-odd"><td><p>Grupo</p></td>
<td><p>040</p></td>
<td><p>020</p></td>
<td><p>010</p></td>
<td><p>060</p></td>
<td><p>050</p></td>
<td><p>030</p></td>
<td><p>070</p></td>
</tr>
<tr class="row-even"><td><p>Todo el mundo</p></td>
<td><p>004</p></td>
<td><p>002</p></td>
<td><p>001</p></td>
<td><p>006</p></td>
<td><p>005</p></td>
<td><p>003</p></td>
<td><p>007</p></td>
</tr>
<tr class="row-odd"><td><p>Usuario + Grupo</p></td>
<td><p>440</p></td>
<td><p>220</p></td>
<td><p>110</p></td>
<td><p>660</p></td>
<td><p>550</p></td>
<td><p>330</p></td>
<td><p>770</p></td>
</tr>
<tr class="row-even"><td><p>Grupo + Mundo</p></td>
<td><p>044</p></td>
<td><p>022</p></td>
<td><p>011</p></td>
<td><p>066</p></td>
<td><p>055</p></td>
<td><p>033</p></td>
<td><p>077</p></td>
</tr>
<tr class="row-odd"><td><p>Usuario + M</p></td>
<td><p>404</p></td>
<td><p>202</p></td>
<td><p>101</p></td>
<td><p>606</p></td>
<td><p>505</p></td>
<td><p>303</p></td>
<td><p>707</p></td>
</tr>
<tr class="row-even"><td><p>Tod&#64;s</p></td>
<td><p>444</p></td>
<td><p>222</p></td>
<td><p>111</p></td>
<td><p>666</p></td>
<td><p>555</p></td>
<td><p>333</p></td>
<td><p>777</p></td>
</tr>
</tbody>
</table>
<blockquote>
<div><ul class="simple">
<li><p>Mediante máscara: Esta es la forma menos común de declarar los permisos, pero también se utiliza. Para declarar un valor hay que hacer uso del comando <code class="code docutils literal notranslate"><span class="pre">umask(1p)</span></code></p></li>
</ul>
</div></blockquote>
<p>Si queremos asignar el valor 022 a la máscara, este es el valor que le tendremos que restar al número actual de permisos que se encuentre en el directorio actual.
Por ejemplo:</p>
<ul class="simple">
<li><p>002 = 777 - 002 = 775 (rwrwxr-x)</p></li>
<li><p>444 = 644 - 444 = 200 (-w——-)</p></li>
<li><p>020 = 660 - 020 = 640 (rw–r—-)</p></li>
</ul>
<p>Para declarar el valor de una máscara se hace uso de <code class="code docutils literal notranslate"><span class="pre">umask(1p)</span></code> tal que así:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">umask</span> <span class="m">020</span>
</pre></div>
</div>
<p>Cuando se declara una máscara en un directorio, todos los archivos y rutas que se creen dentro de él, heredarán estos permisos. No es que se aplique directamente al archivo/directorio.</p>
<div class="section" id="como-ver-los-permisos">
<h3>¿Cómo ver los permisos?<a class="headerlink" href="#como-ver-los-permisos" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Para visualizar los permisos tenemos el magnífico comando <code class="code docutils literal notranslate"><span class="pre">ls(1)</span></code></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ls -al
</pre></div>
</div>
<p>Este comando muestra todos los archivos y directorios que se encuentren en el directorio actual además de los ocultos. En suma, muestra los enlaces tanto duros como simbólicos. En la siguiente salida, si nos fijamos en la primera columna de la izquierda veremos los permisos y el tipo de archivo.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>lrwxrwxrwx.  <span class="m">1</span> sincorchetes sincorchetes    <span class="m">37</span> May <span class="m">19</span> <span class="m">21</span>:51  .steampath -&gt; /home/sincorchetes/.steam/sdk32/steam
lrwxrwxrwx.  <span class="m">1</span> sincorchetes sincorchetes    <span class="m">35</span> May <span class="m">19</span> <span class="m">21</span>:51  .steampid -&gt; /home/sincorchetes/.steam/steam.pid
drwxrwxr-x.  <span class="m">3</span> sincorchetes sincorchetes  <span class="m">4096</span> Mar  <span class="m">7</span> <span class="m">14</span>:17  .subversion
-rw-rw-r--.  <span class="m">1</span> sincorchetes sincorchetes     <span class="m">8</span> Mar <span class="m">28</span> <span class="m">22</span>:29  .tasks
drwxrwxr-x.  <span class="m">2</span> sincorchetes sincorchetes  <span class="m">4096</span> Jan <span class="m">20</span> <span class="m">04</span>:25  .themes
drwx------.  <span class="m">3</span> sincorchetes sincorchetes  <span class="m">4096</span> Feb <span class="m">12</span> <span class="m">01</span>:10  .thumbnails
drwx------.  <span class="m">3</span> sincorchetes sincorchetes  <span class="m">4096</span> Jan <span class="m">20</span> <span class="m">11</span>:05  .thunderbird
drwxrwxr-x.  <span class="m">3</span> sincorchetes sincorchetes  <span class="m">4096</span> May <span class="m">27</span> <span class="m">19</span>:56  .tmux
-rw-rw-r--.  <span class="m">1</span> sincorchetes sincorchetes   <span class="m">370</span> May <span class="m">27</span> <span class="m">19</span>:57  .tmux.conf
drwxrwxr-x.  <span class="m">7</span> sincorchetes sincorchetes  <span class="m">4096</span> Jun  <span class="m">2</span> <span class="m">12</span>:38  .vagrant.d
drwxr-xr-x.  <span class="m">2</span> sincorchetes sincorchetes  <span class="m">4096</span> Jun  <span class="m">4</span> <span class="m">17</span>:08  Videos
</pre></div>
</div>
<p>Los archivos que contienen una «l» en los permisos denotan que son enlaces simbólicos y se puede además saber porque apuntan a otro directorio/fichero «-&gt;».</p>
<p>Aquellos que contienen una «d», denotan que son directorios y los que no contienen nada más que un «-» se interpretan como archivos.</p>
<p>Modificando la autoría de archivos/directorios
Como podemos ver, se pueden asignar múltiples permisos a los archiv&#64;s, ahora bien, ¿Qué pasa si queremos cambiar el autor del fichero, el grupo o ambos?</p>
<p>Podemos hacerlo gracias al comando <code class="code docutils literal notranslate"><span class="pre">chown(1)</span></code>:</p>
<ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">chown</span> <span class="pre">usuario</span> <span class="pre">fichero/directorio</span></code>: Cambiando el autor del fichero y/o directorio</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">chown</span> <span class="pre">usuario:grupo</span></code>: Cambiando el autor y el <strong>grupo</strong> al fichero y/o directorio</p></li>
</ul>
<p>Se puede asignar un autor a un fichero y tener un grupo diferente, el autor podrá modificarlo, leerlo o ejecutarlo en cualquier momento, es indiferente.</p>
</div>
</div>
<div class="section" id="permisos-especiales">
<h2>Permisos especiales<a class="headerlink" href="#permisos-especiales" title="Enlazar permanentemente con este título">¶</a></h2>
<div class="section" id="sticky-bit">
<h3>Sticky Bit<a class="headerlink" href="#sticky-bit" title="Enlazar permanentemente con este título">¶</a></h3>
<p>¿Qué pasa si tenemos much&#64;s usuari&#64;s dentro de un grupo cuyo grupo tiene asignado un directorio de trabajo y el usuario «Pepe» crea un fichero y la usuaria «Susana» intenta eliminarlo? Que podrá hacerlo siempre y cuando, se aplique una restricción llamada «Sticky Bit» del inglés, «bit pegajoso». Este permiso especial, permite restringir los archivos creados y modificados por l&#64;s miembr&#64;s de un grupo y evitar que se genere un «autosabotaje» o un borrado por error.</p>
<p>Para habilitarlo bastará con efectuar:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>chmod <span class="m">1000</span> archivo/directorio
</pre></div>
</div>
<p>ó
.. code-block:: bash</p>
<blockquote>
<div><p>chmod u+t archivo/directorio</p>
</div></blockquote>
<div class="section" id="aplicar-permisos-recursivos-en-los-ficheros-y-subdirectorios-de-un-directorio">
<h4>Aplicar permisos recursivos en los ficheros y subdirectorios de un directorio<a class="headerlink" href="#aplicar-permisos-recursivos-en-los-ficheros-y-subdirectorios-de-un-directorio" title="Enlazar permanentemente con este título">¶</a></h4>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>chmod <span class="m">1000</span> -R directorio
</pre></div>
</div>
<p>Cuando ejecutemos un <code class="code docutils literal notranslate"><span class="pre">ls(1)</span></code>, veremos que en los permisos se habrá añadido un «t» al final tanto para directorios como para ficheros, esto nos indica la activación del Sticky Bit, también aparecerá modo de ejecución permitido. Si aparece una «T» en vez de una «t», esto quiere decir, que se ha activado el Sticky Bit pero solo para el usuario actual, si vemos el resultado, no contienen permisos de ejecución y por lo tanto no se permitirá crear archivos/directorios.</p>
</div>
<div class="section" id="salida-con-sticky-bit-activado">
<h4>Salida con Sticky Bit activado<a class="headerlink" href="#salida-con-sticky-bit-activado" title="Enlazar permanentemente con este título">¶</a></h4>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ls -al
total <span class="m">8</span>
drwxrwxrwt. <span class="m">2</span> root root  <span class="m">4096</span> Jun <span class="m">11</span> <span class="m">07</span>:41 .
drwxrwxrwt. <span class="m">3</span> root users <span class="m">4096</span> Jun <span class="m">11</span> <span class="m">07</span>:41 ..
</pre></div>
</div>
</div>
<div class="section" id="salida-con-sticky-bit-activado-para-el-usuari-actual">
<h4>Salida con Sticky Bit activado para el usuari&#64; actual<a class="headerlink" href="#salida-con-sticky-bit-activado-para-el-usuari-actual" title="Enlazar permanentemente con este título">¶</a></h4>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ls -al
total <span class="m">8</span>
drwxrwxrwx. <span class="m">2</span> root         users        <span class="m">4096</span> Jun <span class="m">11</span> <span class="m">07</span>:38 .
drwxrwxrwx. <span class="m">3</span> sincorchetes sincorchetes <span class="m">4096</span> Jun <span class="m">11</span> <span class="m">07</span>:37 ..
-rwxrw-rwT. <span class="m">1</span> sincorchetes sincorchetes    <span class="m">0</span> Jun <span class="m">11</span> <span class="m">07</span>:38 <span class="m">12</span>
</pre></div>
</div>
<p>Aquí os podemos mostrar con más claridad el funcionamiento:</p>
<p>&lt;script src=»<a class="reference external" href="https://asciinema.org/a/186545.js">https://asciinema.org/a/186545.js</a>» id=»asciicast-186545» async&gt;&lt;/script&gt;</p>
</div>
</div>
<div class="section" id="suid-y-sguid">
<h3>SUID y SGUID<a class="headerlink" href="#suid-y-sguid" title="Enlazar permanentemente con este título">¶</a></h3>
<p>En Linux existen una serie de condiciones especiales para determinados ejecutables, archivos… que pueden editarse o ejecutarse sin ser el propietario de los mismos. Esta característica nos otorga una cierta ventaja como por ejemplo, si queremos cambiar la contraseña de nuestr&#64; usuari&#64; podemos hacerlo sin ser usuario «root».</p>
<p>Si nos fijamos en los permisos del comando <code class="code docutils literal notranslate"><span class="pre">passwd</span></code>, veremos que tiene la letra «s» dentro de la ristra de permisos.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ls -al /usr/bin
-rwsr-xr-x. <span class="m">1</span> root root         <span class="m">29008</span> Apr <span class="m">12</span> <span class="m">11</span>:24 passwd
</pre></div>
</div>
<p>Digamos que el/la usuari&#64; se hace pasar por «root» para intentar cambiar su contraseña y lo puede hacer gracias a estos permisos. Estos se llaman SUID Set User ID Bit o SGID Set Group ID Bit. Podemos verificar si un archivo o directorio lo tiene activado porque en los permisos del usuario tiene una «s» o en los permisos del grupo contiene «s». Solo el propietario del fichero/directorio puede declarar estos permisos «extendidos».</p>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>En caso de contener una «S», esto quiere decir, que tanto el autor del archivo/directorio como el grupo y el resto del mundo no podrá editar, modificar y/o ejecutar archivos dentro del directorio. De hecho, veremos como se encuentra reducida la salida de permisos._</p>
</div>
</div>
</div>
<div class="section" id="referencias">
<h2>Referencias<a class="headerlink" href="#referencias" title="Enlazar permanentemente con este título">¶</a></h2>
<ul class="simple">
<li><p><a class="reference external" href="https://linux.die.net/man?target=_blank">man pages</a></p></li>
<li><p><a class="reference external" href="https://www.tldp.org?target=_blank">The Linux Document Project</a></p></li>
</ul>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="../pkgmnt/pkgmnt.html" class="btn btn-neutral float-right" title="Gestores de paquetes" accesskey="n" rel="next">Siguiente <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="../linux.html" class="btn btn-neutral float-left" title="Linux" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Anterior</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Derechos de autor 2021, Álvaro Castillo.

    </p>
  </div>
    
    
    
    Construido con <a href="https://www.sphinx-doc.org/">Sphinx</a> usando un
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">tema</a>
    
    proporcionado por <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>